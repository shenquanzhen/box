# 3D 摄像头空间感知应用

这是一个基于Three.js的摄像头空间感知应用，可以在摄像头视图上叠加3D内容，并通过移动设备来从不同角度观察3D对象，实现类似增强现实的效果。

## 项目状态

- [x] 基础3D场景搭建
- [x] 摄像头视频流集成
- [x] 设备方向感知
- [x] 空间视角变化
- [ ] 乒乓球游戏逻辑
- [ ] 更多用户交互界面

## 技术栈

- Three.js: 3D渲染引擎
- WebRTC: 摄像头访问
- DeviceOrientation API: 设备方向感知
- JavaScript: 前端逻辑

## 使用说明

### 运行项目

1. 克隆项目到本地
2. 在项目根目录运行服务器：
   ```
   node server.js
   ```
3. 打开浏览器访问 `http://localhost:3000`

### 交互方式

- **移动设备**：移动设备来改变观察视角，立方体会保持在固定位置
- **桌面设备**：移动鼠标可以模拟视角变化

## 工作原理

本应用使用设备的方向传感器（陀螺仪、加速度计）来感知设备的移动和旋转，然后相应地调整3D场景中的相机位置，使得3D对象看起来像是固定在现实空间中的某个位置。这创造了一种"透视窗口"的效果，就像设备是一个可以看到虚拟对象的窗口。

## 常见问题

### 摄像头权限问题

如果遇到摄像头权限问题：

1. 确保浏览器允许网站访问摄像头
2. 检查是否有其他应用正在使用摄像头
3. 使用支持WebRTC的现代浏览器（Chrome、Firefox、Edge等）
4. 确保通过HTTPS或localhost访问网站

### 设备方向传感器问题

如果设备方向感知不工作：

1. 确保设备有陀螺仪和加速度计
2. 在iOS设备上，需要授予设备方向权限
3. 某些浏览器可能限制设备方向API的使用

### 性能问题

如果应用运行缓慢：

1. 关闭其他占用资源的应用
2. 在较新的设备上运行
3. 确保设备有足够的图形处理能力

## 开发进度

- 2023-03-03: 项目初始化，基础AR场景搭建
- 2023-03-03: 修复AR.js库引入问题，完善摄像头权限检查
- 2023-03-03: 移除AR标记依赖，改为直接摄像头视频流上的3D渲染
- 2023-03-03: 实现设备方向感知，使立方体固定在空间中，通过移动设备改变观察视角

## 许可证

MIT 