# 3D 空间感知立方体应用

这是一个基于Three.js的空间感知应用，可以在摄像头视图上叠加3D内容，并通过移动设备或拖动屏幕来从不同角度观察3D对象，实现类似增强现实的效果。

## 项目状态

- [x] 基础3D场景搭建
- [x] 摄像头视频流集成
- [x] 设备方向感知
- [x] 空间视角变化
- [x] 轨道控制系统
- [x] 立方体固定在空间中
- [ ] 乒乓球游戏逻辑
- [ ] 更多用户交互界面

## 技术栈

- Three.js: 3D渲染引擎
- WebRTC: 摄像头访问
- JavaScript: 前端逻辑
- 球面坐标系: 相机轨道控制

## 使用说明

### 运行项目

1. 克隆项目到本地
2. 在项目根目录运行服务器：
   ```
   node server.js
   ```
3. 打开浏览器访问 `http://localhost:3000`

### 交互方式

- **拖动屏幕**: 围绕立方体移动视角，立方体保持在固定位置
- **滚轮滚动**: 调整与立方体的距离
- **重置视角**: 点击"重置视角"按钮回到初始视角
- **旋转控制**: 点击"开始旋转"/"停止旋转"按钮控制立方体自转
- **更换颜色**: 点击"更换颜色"按钮随机改变立方体颜色

## 工作原理

本应用使用球面坐标系来控制相机围绕立方体的轨道运动。立方体固定在空间中的某个位置，而用户可以通过拖动屏幕来改变观察角度，就像在现实世界中围绕一个物体走动一样。这创造了一种"空间固定"的效果，使得3D对象看起来像是真实存在于用户的环境中。

应用还集成了摄像头视频流作为背景，增强了沉浸感和空间感知效果。

## 常见问题

### 摄像头权限问题

如果遇到摄像头权限问题：

1. 确保浏览器允许网站访问摄像头
2. 检查是否有其他应用正在使用摄像头
3. 使用支持WebRTC的现代浏览器（Chrome、Firefox、Edge等）
4. 确保通过HTTPS或localhost访问网站

### 性能问题

如果应用运行缓慢：

1. 关闭其他占用资源的应用
2. 在较新的设备上运行
3. 确保设备有足够的图形处理能力
4. 减小视频分辨率或禁用视频背景

## 开发进度

- 2023-03-03: 项目初始化，基础AR场景搭建
- 2023-03-03: 修复AR.js库引入问题，完善摄像头权限检查
- 2023-03-03: 移除AR标记依赖，改为直接摄像头视频流上的3D渲染
- 2023-03-03: 实现设备方向感知，使立方体固定在空间中，通过移动设备改变观察视角
- 2023-03-04: 实现轨道控制系统，使立方体固定在空间中，用户可以围绕立方体移动视角
- 2023-03-04: 优化交互体验，添加滚轮缩放功能，更新UI提示

## 许可证

MIT 